<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Working with geospatial data sources of habitat (sub)types and RIBs • n2khab</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Working with geospatial data sources of habitat (sub)types and RIBs">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">n2khab</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/v010_reference_lists.html">Reference lists and using them</a>
    </li>
    <li>
      <a href="../articles/v020_datastorage.html">Where to store the N2KHAB input data sources</a>
    </li>
    <li>
      <a href="../articles/v025_geospatial_hab.html">Working with geospatial data sources of habitat (sub)types and RIBs</a>
    </li>
    <li>
      <a href="../articles/v030_GRTSmh.html">Using the GRTS data sources</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/inbo/n2khab">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Working with geospatial data sources of habitat (sub)types and RIBs</h1>
                        <h4 class="author">Floris Vanderhaeghe, Toon Westra, Jan Wouters</h4>
            
            <h4 class="date">2020-01-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/inbo/n2khab/blob/master/vignettes/v025_geospatial_hab.Rmd"><code>vignettes/v025_geospatial_hab.Rmd</code></a></small>
      <div class="hidden name"><code>v025_geospatial_hab.Rmd</code></div>

    </div>

    
    
<p><em>General note: the below vignette contains frozen output of 27 Jan 2020.</em> <em>This makes it possible to build the package with vignettes without access to the data sources.</em></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(n2khab)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(sf)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(units)</a></code></pre></div>
<div id="intro" class="section level2">
<h2 class="hasAnchor">
<a href="#intro" class="anchor"></a>Intro</h2>
<p>This vignette learns you:</p>
<ul>
<li>the difference between various geospatial N2KHAB data sources on the occurrence of types in Flanders (types being habitat (sub)types or regionally important biotopes (RIBs); see <code><a href="../reference/read_types.html">read_types()</a></code>);</li>
<li>how to load these data sources into R;</li>
<li>how to optimally match an interpreted data source with a ‘types’ column in your own dataframe.</li>
</ul>
</div>
<div id="data-sources" class="section level2">
<h2 class="hasAnchor">
<a href="#data-sources" class="anchor"></a>Data sources</h2>
<p>The below N2KHAB data sources are available. For practical information on data storage and locations, see <code><a href="../articles/v020_datastorage.html">vignette("v020_datastorage")</a></code>.</p>
<ul>
<li>
<strong>raw data sources</strong>:
<ul>
<li>
<strong><code>habitatmap</code></strong> (<a href="https://doi.org/10.5281/zenodo.3354381">Zenodo-link</a>): geospatial polygons of BWK and Natura 2000 habitat types in the Flemish Region, originally published by the Research Institute for Nature and Forest (INBO) <span class="citation">(De Saeger et al. 2018)</span> and distributed by ‘Informatie Vlaanderen’.</li>
<li>
<strong><code>habitatstreams</code></strong> (<a href="https://doi.org/10.5281/zenodo.3386245">Zenodo-link</a>): geospatial lines of the Natura 2000 habitat type <code>3260</code> that correspond with its presence in streaming water segments in the Flemish Region, originally published by INBO <span class="citation">(Leyssen, Denys, and De Saeger 2018)</span> and distributed by ‘Informatie Vlaanderen’.</li>
<li>
<strong><code>habitatsprings</code></strong> (<a href="https://doi.org/10.5281/zenodo.3550994">Zenodo-link</a>): geospatial points hat correspond with the presence or absence of the Natura 2000 habitat type <code>7220</code> in springs and streaming water segments in the Flemish Region. The data source is produced, owned and administered by INBO.</li>
</ul>
</li>
<li>
<strong>processed data sources</strong>:
<ul>
<li>
<strong><code>habitatmap_stdized</code></strong> (<a href="https://doi.org/10.5281/zenodo.3355192">Zenodo-link</a>): derived from <code>habitatmap</code>. This datasource only contains polygons with habitat (sub)type or RIB codes. All codes conform to the <code>types</code> reference list (see <code><a href="../reference/read_types.html">read_types()</a></code>). The datasource is a GeoPackage with essentially two objects: 1) the geospatial polygons; 2) a long-formatted table with the associated types (multiple records can occur per <code>polygon_id</code>). For more details see <code><a href="../reference/read_habitatmap_stdized.html">read_habitatmap_stdized()</a></code>.</li>
<li>
<strong><code>habitatmap_terr</code></strong> (<a href="https://doi.org/10.5281/zenodo.3468948">Zenodo-link</a>): the further interpreted, terrestrial part of <code>habitatmap_stdized</code> (‘terrestrial’ includes ‘semi-terrestrial’). Amongst other properties, it excludes polygons <em>without</em> terrestrial types, it excludes rows which most probably are no habitat or RIB at all, and several main type codes were translated to a corresponding subtype which they almost always represent. The datasource is a GeoPackage, organized in the same way as <code>habitatmap_stdized</code>. For more details see <code><a href="../reference/read_habitatmap_terr.html">read_habitatmap_terr()</a></code>.</li>
<li>
<strong><code>watersurfaces_hab</code></strong> (<a href="https://doi.org/10.5281/zenodo.3374645">Zenodo-link</a>): a combination of the environmental data source <code>watersurfaces</code> (<span class="citation">Packet et al. (2018)</span>; see <code><a href="../reference/read_watersurfaces.html">read_watersurfaces()</a></code>) and the above data source <code>habitatmap_stdized</code>. It represents polygons (from <code>watersurfaces</code> or <code>habitatmap_stdized</code>) that completely or partly contain standing water habitat types or RIBs (i.e. <code>2190_a</code>, ‘<code>31..</code>’ types or <code>rbbah</code>; types <code>3260</code> and <code>7220</code> are not included). The datasource is a GeoPackage, organized in the same way as <code>habitatmap_stdized</code>. For more details see <code><a href="../reference/read_watersurfaces_hab.html">read_watersurfaces_hab()</a></code>.</li>
</ul>
</li>
</ul>
</div>
<div id="using-the-read_----functions" class="section level2">
<h2 class="hasAnchor">
<a href="#using-the-read_----functions" class="anchor"></a>Using the <code>read_...()</code> functions</h2>
<p>In the below R code, it is supposed that a <code>n2khab_data</code> folder is present in your working directory or a directory up to 10 levels higher, with the relevant data sources in the right place. See <code><a href="../articles/v020_datastorage.html">vignette("v020_datastorage")</a></code> for the setup.</p>
<p>The advantage of using the <code>read_...()</code> functions is the uniform approach to read the above data sources in R, enhancing collaboration and speeding up your work.</p>
<ul>
<li>Geospatial layers are represented as an <code>sf</code> object, in the coordinate reference system (CRS) ‘Belge 1972 / Belgian Lambert 72’ (EPSG-code <a href="https://epsg.io/31370">31370</a>).</li>
<li>Dataframes are presented as tibbles.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
</li>
<li>English &amp; <a href="https://style.tidyverse.org/">tidyverse-styled</a> names of variables stimulate you to always produce internationalized code, tables and figures.</li>
<li>The <code>type</code> variable (if present) is a factor with the same levels as the <code>type</code> variable of the <code>types</code> reference list (see <code><a href="../reference/read_types.html">read_types()</a></code>).</li>
<li>Some variables may be discarded that should normally have no added value, e.g. values that duplicate already existing information.</li>
</ul>
<div id="returning-raw-data-sources" class="section level3">
<h3 class="hasAnchor">
<a href="#returning-raw-data-sources" class="anchor"></a>Returning raw data sources</h3>
<p>The functions do just basic preprocessing, in order to return (by default) an object that well reflects the structure of the raw data source and returns all its records.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">habitatmap &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_habitatmap.html">read_habitatmap</a></span>()</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">habitatmap</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; Simple feature collection with 618147 features and 30 fields</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; bbox:           xmin: 21991.38 ymin: 153058.3 xmax: 258871.8 ymax: 244027.3</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; epsg (SRID):    31370</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; proj4string:    +proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 +lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl +towgs84=-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747 +units=m +no_defs</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; # A tibble: 618,147 x 31</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt;    polygon_id eval  eenh1 eenh2 eenh3 eenh4 eenh5 eenh6 eenh7 eenh8 v1    v2   </span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt;  * &lt;chr&gt;      &lt;fct&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt;  1 000098_v2… m     b     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt;  2 000132_v2… m     bl    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt;  3 000135_v2… m     bl    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt;  4 000136_v2… m     bl    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt;  5 000142_v2… m     bl    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;  6 000150_v2… m     bl    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt;  7 000152_v2… m     bl    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt;  8 000154_v2… m     bl    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt;  9 000297_v2… m     bl    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; 10 000805_v2… m     bl    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; # … with 618,137 more rows, and 19 more variables: v3 &lt;chr&gt;, source &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; #   info &lt;chr&gt;, bwk_label &lt;chr&gt;, hab1 &lt;chr&gt;, phab1 &lt;int&gt;, hab2 &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt; #   phab2 &lt;int&gt;, hab3 &lt;chr&gt;, phab3 &lt;int&gt;, hab4 &lt;chr&gt;, phab4 &lt;int&gt;, hab5 &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co">#&gt; #   phab5 &lt;int&gt;, source_hab &lt;chr&gt;, source_phab &lt;chr&gt;, hab_legend &lt;fct&gt;,</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co">#&gt; #   area_m2 &lt;dbl&gt;, geometry &lt;MULTIPOLYGON [m]&gt;</span></a></code></pre></div>
<p>The <code>habitatmap</code> object is a very wide dataframe which is not so easy to handle in R. For analytical work on habitat types and RIBs, you’re advised to use the tidied data source <code>habitatmap_stdized</code>; see <a href="#processed-data-sources">below</a>.</p>
<p><code><a href="../reference/read_habitatmap.html">read_habitatmap(select_hab = TRUE)</a></code> will only retain the polygons that occur in <code>habitatmap_stdized</code>, i.e. those that contain habitat types or RIBs.</p>
<p>Both <code>habitatstreams</code> and <code>habitatsprings</code> have a straightforward data structure. There was no need to generate derived data sources.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">habitatstreams &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_habitatstreams.html">read_habitatstreams</a></span>()</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">habitatstreams</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; Simple feature collection with 560 features and 3 fields</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; geometry type:  LINESTRING</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; bbox:           xmin: 33097.92 ymin: 157529.6 xmax: 254039 ymax: 243444.6</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; epsg (SRID):    31370</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; proj4string:    +proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 +lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl +towgs84=-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747 +units=m +no_defs</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; # A tibble: 560 x 4</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;    river_name   source_id type                                          geometry</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;  * &lt;fct&gt;        &lt;fct&gt;     &lt;fct&gt;                                 &lt;LINESTRING [m]&gt;</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;  1 WOLFPUTBEEK  VMM       3260  (127857.1 167681.2, 127854.9 167684.5, 127844 1…</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;  2 OUDE KALE    VMM       3260  (95737.01 196912.9, 95732.82 196912.4, 95710.38…</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;  3 VENLOOP      EcoInv    3260  (169352.7 209314.9, 169358.8 209290.5, 169326.2…</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;  4 VENLOOP      EcoInv    3260  (169633.6 209293.5, 169625 209289.2, 169594.4 2…</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;  5 KLEINE NETE  EcoInv    3260  (181087.1 208607.2, 181088.6 208608.1, 181089 2…</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt;  6 KLEINE NETE  EcoInv    3260  (180037.4 208360.4, 180038.3 208377.5, 180038.3…</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt;  7 KLEINE NETE  EcoInv    3260  (180520 208595.7, 180540.5 208607.4, 180541.2 2…</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt;  8 KLEINE NETE  EcoInv    3260  (187379.9 209998.8, 187381.3 209998.5, 187381.6…</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt;  9 RAAMDONKSEB… extrapol  3260  (183545.5 192409, 183541.9 192406.7, 183541.9 1…</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt; 10 KLEINE NETE  EcoInv    3260  (183516.4 208261.7, 183567.3 208279.2, 183567.3…</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; # … with 550 more rows</span></a></code></pre></div>
<p>With <code><a href="../reference/read_habitatstreams.html">read_habitatstreams(source_text = TRUE)</a></code> a second object <code>sources</code> is returned with the meaning of the <code>source_id</code> codes:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/read_habitatstreams.html">read_habitatstreams</a></span>(<span class="dt">source_text =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span>.<span class="op">$</span>sources</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; # A tibble: 7 x 2</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;   source_id          source_text                                                </span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;   &lt;fct&gt;              &lt;fct&gt;                                                      </span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; 1 VMM                "Gegevens afgeleid van macrofyteninventarisaties uitgevoer…</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; 2 EcoInv             "Tijdens ecologische inventarisatiestudies uitgevoerd in o…</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; 3 extrapol           "De conclusie van het nabijgelegen geïnventariseerde segme…</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; 4 Van Belleghem (20… "Macrofytengegevens afgeleid van Van Belleghem S., Bal K.,…</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; 5 Leyssen ea (2005)  "Macrofytengegevens afgeleid van Leyssen A., Adriaens P., …</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; 6 WrnBe              "Waarnemingen afkomstig van Waarnemingen.be, de website vo…</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; 7 INBO               "Tijdens veldbezoeken werd de aan- of afwezigheid van het …</span></a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">habitatsprings &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_habitatsprings.html">read_habitatsprings</a></span>()</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">habitatsprings</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; Simple feature collection with 102 features and 9 fields</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; geometry type:  POINT</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; bbox:           xmin: 36407.84 ymin: 155249.7 xmax: 258371.1 ymax: 179732</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; epsg (SRID):    31370</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; proj4string:    +proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 +lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl +towgs84=-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747 +units=m +no_defs</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; # A tibble: 102 x 10</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;    point_id name  code_orig type  certain area_m2  year in_sac source</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;  *    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;fct&gt; &lt;lgl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;chr&gt; </span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt;  1        1 Stee… 7220      7220  TRUE         50  2014 TRUE   kalkt…</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt;  2        2 Stee… 7220      7220  TRUE         20  2014 TRUE   kalkt…</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt;  3        3 Duli… 7230      7230  TRUE         NA  2014 TRUE   kalkt…</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt;  4        4 Kapi… gh        &lt;NA&gt;  TRUE         NA  2014 TRUE   kalkt…</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt;  5        5 Reme… 7220      7220  TRUE        200  2014 TRUE   kalkt…</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt;  6        6 Reme… 7220      7220  TRUE        500  2014 TRUE   kalkt…</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt;  7        7 Kest… 7220,gh   7220  FALSE        NA    NA TRUE   anb   </span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt;  8        8 Krin… 7220      7220  TRUE        800  2014 TRUE   kalkt…</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">#&gt;  9        9 Bois… 7220      7220  TRUE         50  2014 TRUE   kalkt…</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt; 10       10 Kwin… 7220      7220  TRUE         10  2014 TRUE   kalkt…</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt; # … with 92 more rows, and 1 more variable: geometry &lt;POINT [m]&gt;</span></a></code></pre></div>
<p>The meaning of each column is described in the function documentation.</p>
</div>
<div id="returning-processed-data-sources" class="section level3">
<h3 class="hasAnchor">
<a href="#returning-processed-data-sources" class="anchor"></a>Returning processed data sources</h3>
<p>The reading functions for the three processed data sources will always return a <strong>list</strong>:</p>
<ul>
<li>the first element holds the geospatial information as an <strong>sf object</strong>. It has unique feature IDs that can be joined with rows of the second element;</li>
<li>the second element is a <strong>tibble</strong> that presents attributes of the features as <em><strong><a href="https://r4ds.had.co.nz/tidy-data.html#tidy-data-1">tidy</a> data</strong></em>.</li>
</ul>
<p>Let’s see how this works!</p>
<div id="read_habitatmap_stdized" class="section level4">
<h4 class="hasAnchor">
<a href="#read_habitatmap_stdized" class="anchor"></a>read_habitatmap_stdized()</h4>
<p>A tidy representation of the <code>habitatmap</code> data, restricted to the polygons that contain habitat types or RIBs, is returned by <code><a href="../reference/read_habitatmap_stdized.html">read_habitatmap_stdized()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">hms &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_habitatmap_stdized.html">read_habitatmap_stdized</a></span>()</a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">hms_pol &lt;-<span class="st"> </span>hms<span class="op">$</span>habitatmap_polygons</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">hms_pol</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt; Simple feature collection with 77048 features and 2 fields</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; bbox:           xmin: 22003.2 ymin: 153084.4 xmax: 258871.8 ymax: 243351.8</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; epsg (SRID):    31370</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; proj4string:    +proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 +lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl +towgs84=-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747 +units=m +no_defs</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; # A tibble: 77,048 x 3</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt;    polygon_id  description_orig                                             geom</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt;  * &lt;fct&gt;       &lt;chr&gt;                                          &lt;MULTIPOLYGON [m]&gt;</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt;  1 129420_v20… 60% x; 40% 6430_hf (((242838.5 161337.3, 242842.8 161324.7, 2428…</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;  2 130153_v20… 70% 9120_qb; 30% … (((150669.4 227248.6, 150668.1 227242.9, 1505…</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt;  3 130815_v20… 70% gh; 30% 9160   (((258338.4 158696.1, 258336.5 158693.5, 2583…</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt;  4 137826_v20… 100% 6430,rbbhf    (((181587.2 234938, 181613.1 234933.1, 181646…</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt;  5 170624_v20… 100% rbbmr         (((145876.8 229686.8, 145701.7 229680.6, 1456…</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt;  6 203261_v20… 70% gh; 30% rbbmr  (((117137.2 210307.9, 117136.3 210288.3, 1171…</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt;  7 204352_v20… 80% gh; 20% rbbsp  (((116357.3 159278.3, 116340.5 159259.8, 1163…</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt;  8 204376_v20… 90% gh; 10% rbbsg  (((116110.1 210545.5, 116102.4 210541.1, 1160…</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt;  9 205188_v20… 60% rbbsp; 40% gh  (((232114.7 161594.5, 232122.7 161590.5, 2321…</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt; 10 205291_v20… 70% gh; 30% rbbsp  (((191253.5 160641.5, 191254.8 160636.1, 1912…</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co">#&gt; # … with 77,038 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">hms_occ &lt;-<span class="st"> </span>hms<span class="op">$</span>habitatmap_types</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">hms_occ</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; # A tibble: 98,737 x 5</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt;    polygon_id   code_orig  phab certain type    </span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt;    &lt;fct&gt;        &lt;chr&gt;     &lt;dbl&gt; &lt;lgl&gt;   &lt;fct&gt;   </span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt;  1 000038_v2016 91E0_va     100 TRUE    91E0_va </span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt;  2 000043_v2016 9130_end    100 TRUE    9130_end</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt;  3 000132_v2016 9130_end    100 TRUE    9130_end</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt;  4 000204_v2016 91E0_vn     100 TRUE    91E0_vn </span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt;  5 000255_v2016 91E0_vc     100 TRUE    91E0_vc </span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt;  6 000297_v2016 rbbsp        10 TRUE    rbbsp   </span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt;  7 000311_v2016 9130_end     70 TRUE    9130_end</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt;  8 000311_v2016 rbbsp        30 TRUE    rbbsp   </span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">#&gt;  9 000390_v2016 91E0_vn      70 TRUE    91E0_vn </span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="co">#&gt; 10 000390_v2016 91E0_va      30 TRUE    91E0_va </span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="co">#&gt; # … with 98,727 more rows</span></a></code></pre></div>
<p>Let’s estimate the surface area per type, including uncertain occurrences of types and taking into account cover percentage per polygon (<code>phab</code>):</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">hms_pol <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">area =</span> <span class="kw"><a href="https://rdrr.io/pkg/sf/man/geos_measures.html">st_area</a></span>(.)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span>st_drop_geometry <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">inner_join</a></span>(hms_occ, <span class="dt">by =</span> <span class="st">"polygon_id"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="st">    </span><span class="co"># area of type within polygon:</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">area_type =</span> area <span class="op">*</span><span class="st"> </span>phab <span class="op">/</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(type) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/tidyverse.html">summarise</a></span>(<span class="dt">area =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(area_type) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="st">                    </span><span class="kw"><a href="https://rdrr.io/pkg/units/man/set_units.html">set_units</a></span>(<span class="st">"ha"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="st">                    </span><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">            )</a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">#&gt; # A tibble: 101 x 2</span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt;    type        area</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt;    &lt;fct&gt;       [ha]</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="co">#&gt;  1 1130     5353.85</span></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="co">#&gt;  2 1140     2096.20</span></a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="co">#&gt;  3 1310_pol   17.39</span></a>
<a class="sourceLine" id="cb9-18" data-line-number="18"><span class="co">#&gt;  4 1310_zk    43.08</span></a>
<a class="sourceLine" id="cb9-19" data-line-number="19"><span class="co">#&gt;  5 1310_zv    10.62</span></a>
<a class="sourceLine" id="cb9-20" data-line-number="20"><span class="co">#&gt;  6 1320        1.55</span></a>
<a class="sourceLine" id="cb9-21" data-line-number="21"><span class="co">#&gt;  7 1330_da   110.23</span></a>
<a class="sourceLine" id="cb9-22" data-line-number="22"><span class="co">#&gt;  8 1330_hpr  136.40</span></a>
<a class="sourceLine" id="cb9-23" data-line-number="23"><span class="co">#&gt;  9 2110       26.84</span></a>
<a class="sourceLine" id="cb9-24" data-line-number="24"><span class="co">#&gt; 10 2120      481.62</span></a>
<a class="sourceLine" id="cb9-25" data-line-number="25"><span class="co">#&gt; # … with 91 more rows</span></a></code></pre></div>
</div>
<div id="read_habitatmap_terr" class="section level4">
<h4 class="hasAnchor">
<a href="#read_habitatmap_terr" class="anchor"></a>read_habitatmap_terr()</h4>
<p><code><a href="../reference/read_habitatmap_terr.html">read_habitatmap_terr()</a></code> behaves exactly the same way:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">hmt &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_habitatmap_terr.html">read_habitatmap_terr</a></span>()</a></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">hmt<span class="op">$</span>habitatmap_terr_polygons</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt; Simple feature collection with 68300 features and 4 fields</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt; bbox:           xmin: 22003.2 ymin: 153084.4 xmax: 258871.8 ymax: 243351.8</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt; epsg (SRID):    31370</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt; proj4string:    +proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 +lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl +towgs84=-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747 +units=m +no_defs</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt; # A tibble: 68,300 x 5</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt;    polygon_id  description_orig  description source                         geom</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt;  * &lt;fct&gt;       &lt;chr&gt;             &lt;chr&gt;       &lt;fct&gt;            &lt;MULTIPOLYGON [m]&gt;</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt;  1 129420_v20… 60% x; 40% 6430_… 60% x; 40%… habita… (((242838.5 161337.3, 2428…</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt;  2 130153_v20… 70% 9120_qb; 30%… 70% 9120_q… habita… (((150669.4 227248.6, 1506…</span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">#&gt;  3 130815_v20… 70% gh; 30% 9160  70% gh; 30… habita… (((258338.4 158696.1, 2583…</span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">#&gt;  4 137826_v20… 100% 6430,rbbhf   100% 6430_… habita… (((181587.2 234938, 181613…</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co">#&gt;  5 170624_v20… 100% rbbmr        100% rbbmr  habita… (((145876.8 229686.8, 1457…</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16"><span class="co">#&gt;  6 203261_v20… 70% gh; 30% rbbmr 70% gh; 30… habita… (((117137.2 210307.9, 1171…</span></a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co">#&gt;  7 204352_v20… 80% gh; 20% rbbsp 80% gh; 20… habita… (((116357.3 159278.3, 1163…</span></a>
<a class="sourceLine" id="cb11-18" data-line-number="18"><span class="co">#&gt;  8 204376_v20… 90% gh; 10% rbbsg 90% gh; 10… habita… (((116110.1 210545.5, 1161…</span></a>
<a class="sourceLine" id="cb11-19" data-line-number="19"><span class="co">#&gt;  9 205188_v20… 60% rbbsp; 40% gh 60% rbbsp;… habita… (((232114.7 161594.5, 2321…</span></a>
<a class="sourceLine" id="cb11-20" data-line-number="20"><span class="co">#&gt; 10 205291_v20… 70% gh; 30% rbbsp 70% gh; 30… habita… (((191253.5 160641.5, 1912…</span></a>
<a class="sourceLine" id="cb11-21" data-line-number="21"><span class="co">#&gt; # … with 68,290 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">hmt<span class="op">$</span>habitatmap_terr_types</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; # A tibble: 87,513 x 6</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt;    polygon_id   code_orig  phab certain type     source            </span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt;    &lt;fct&gt;        &lt;chr&gt;     &lt;dbl&gt; &lt;lgl&gt;   &lt;fct&gt;    &lt;fct&gt;             </span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt;  1 000038_v2016 91E0_va     100 TRUE    91E0_va  habitatmap_stdized</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt;  2 000043_v2016 9130_end    100 TRUE    9130_end habitatmap_stdized</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt;  3 000132_v2016 9130_end    100 TRUE    9130_end habitatmap_stdized</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt;  4 000204_v2016 91E0_vn     100 TRUE    91E0_vn  habitatmap_stdized</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt;  5 000255_v2016 91E0_vc     100 TRUE    91E0_vc  habitatmap_stdized</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt;  6 000297_v2016 rbbsp        10 TRUE    rbbsp    habitatmap_stdized</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt;  7 000311_v2016 9130_end     70 TRUE    9130_end habitatmap_stdized</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt;  8 000311_v2016 rbbsp        30 TRUE    rbbsp    habitatmap_stdized</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt;  9 000390_v2016 91E0_vn      70 TRUE    91E0_vn  habitatmap_stdized</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt; 10 000390_v2016 91E0_va      30 TRUE    91E0_va  habitatmap_stdized</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt; # … with 87,503 more rows</span></a></code></pre></div>
<p>Compared to <code>habitatmap_stdized</code>, <em>purely</em> aquatic or non-habitat/RIB polygons were omitted, and a part of the type data were interpreted in a more specific way.</p>
<p>As a consequence, some type codes are completely absent from <code>habitatmap_terr_types</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">hms_occ <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(type) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">anti_join</a></span>(hmt<span class="op">$</span>habitatmap_terr_types <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="st">              </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(type), </a>
<a class="sourceLine" id="cb13-5" data-line-number="5">            <span class="dt">by =</span> <span class="st">"type"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(type)</a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt; # A tibble: 7 x 1</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt;   type </span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt;   &lt;fct&gt;</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt; 1 2190 </span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt; 2 3110 </span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt; 3 6410 </span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt; 4 6430 </span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">#&gt; 5 6510 </span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">#&gt; 6 7140 </span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co">#&gt; 7 9130</span></a></code></pre></div>
<p>About 4% of all type occurrences received a new type code:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">hmt<span class="op">$</span>habitatmap_terr_types <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(source) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">pct =</span> (n <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(n) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; # A tibble: 2 x 3</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt;   source                                  n   pct</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt;   &lt;fct&gt;                               &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt; 1 habitatmap_stdized                  83667    96</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt; 2 habitatmap_stdized + interpretation  3846     4</span></a></code></pre></div>
</div>
<div id="read_watersurfaces_hab" class="section level4">
<h4 class="hasAnchor">
<a href="#read_watersurfaces_hab" class="anchor"></a>read_watersurfaces_hab()</h4>
<p>A similar story, this time for polygons that (could) have aquatic types:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">wsh &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_watersurfaces_hab.html">read_watersurfaces_hab</a></span>()</a></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">wsh<span class="op">$</span>watersurfaces_polygons</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="co">#&gt; Simple feature collection with 2947 features and 4 fields</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">#&gt; bbox:           xmin: 22546.57 ymin: 159273.1 xmax: 253928.1 ymax: 242960.1</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#&gt; epsg (SRID):    31370</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt; proj4string:    +proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 +lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl +towgs84=-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747 +units=m +no_defs</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt; # A tibble: 2,947 x 5</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt;    polygon_id polygon_id_ws polygon_id_habi… description_orig</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt;  * &lt;fct&gt;      &lt;fct&gt;         &lt;fct&gt;            &lt;chr&gt;           </span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">#&gt;  1 ANTANT0082 ANTANT0082    596466_v2014     60% 3150; 20% r…</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="co">#&gt;  2 ANTANT0251 ANTANT0251    113978_v2014     100% 3150       </span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"><span class="co">#&gt;  3 ANTANT0253 ANTANT0253    111606_v2014     100% 3150       </span></a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="co">#&gt;  4 ANTANT0297 ANTANT0297    409153_v2014+40… 85% 3140; 15% 3…</span></a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="co">#&gt;  5 ANTANT0315 ANTANT0315    519082_v2018     100% 3140       </span></a>
<a class="sourceLine" id="cb16-16" data-line-number="16"><span class="co">#&gt;  6 ANTANT0319 ANTANT0319    601958_v2014     100% 3150,gh    </span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="co">#&gt;  7 ANTANT0381 ANTANT0381    644003_v2014     85% gh; 15% 3140</span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18"><span class="co">#&gt;  8 ANTANT0383 ANTANT0383    631879_v2014+59… 50% 3150; 40% r…</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19"><span class="co">#&gt;  9 ANTANT0384 ANTANT0384    644003_v2014     85% gh; 15% 3140</span></a>
<a class="sourceLine" id="cb16-20" data-line-number="20"><span class="co">#&gt; 10 ANTANT0434 ANTANT0434    537902_v2018     100% 3140       </span></a>
<a class="sourceLine" id="cb16-21" data-line-number="21"><span class="co">#&gt; # … with 2,937 more rows, and 1 more variable: geom &lt;MULTIPOLYGON [m]&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">wsh<span class="op">$</span>watersurfaces_types</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="co">#&gt; # A tibble: 3,302 x 4</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">#&gt;    polygon_id code_orig certain type </span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt;    &lt;fct&gt;      &lt;chr&gt;     &lt;lgl&gt;   &lt;fct&gt;</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt;  1 ANTANT0082 3150      TRUE    3150 </span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt;  2 ANTANT0251 3150      TRUE    3150 </span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">#&gt;  3 ANTANT0253 3150      TRUE    3150 </span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="co">#&gt;  4 ANTANT0297 3140      TRUE    3140 </span></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="co">#&gt;  5 ANTANT0297 3150      TRUE    3150 </span></a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">#&gt;  6 ANTANT0315 3140      TRUE    3140 </span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co">#&gt;  7 ANTANT0319 3150,gh   FALSE   3150 </span></a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="co">#&gt;  8 ANTANT0381 3140      TRUE    3140 </span></a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="co">#&gt;  9 ANTANT0383 3150      TRUE    3150 </span></a>
<a class="sourceLine" id="cb17-14" data-line-number="14"><span class="co">#&gt; 10 ANTANT0384 3140      TRUE    3140 </span></a>
<a class="sourceLine" id="cb17-15" data-line-number="15"><span class="co">#&gt; # … with 3,292 more rows</span></a></code></pre></div>
<p>Let’s compute some statistics of standing water types (ignoring the value <code>certain</code>):</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">wsh<span class="op">$</span>watersurfaces_polygons <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">area =</span> <span class="kw"><a href="https://rdrr.io/pkg/sf/man/geos_measures.html">st_area</a></span>(.)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span>st_drop_geometry <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">inner_join</a></span>(wsh<span class="op">$</span>watersurfaces_types,</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">             <span class="dt">by =</span> <span class="st">"polygon_id"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(type) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/tidyverse.html">summarise</a></span>(<span class="dt">nr_watersurfaces =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(polygon_id),</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">            <span class="dt">total_area =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(area),</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">            <span class="dt">area_min =</span> <span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span>(area),</a>
<a class="sourceLine" id="cb18-10" data-line-number="10">            <span class="dt">area_Q1 =</span> <span class="kw"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span>(area, <span class="fl">0.25</span>),</a>
<a class="sourceLine" id="cb18-11" data-line-number="11">            <span class="dt">area_Q2 =</span> <span class="kw"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span>(area, <span class="fl">0.5</span>),</a>
<a class="sourceLine" id="cb18-12" data-line-number="12">            <span class="dt">area_Q3 =</span> <span class="kw"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span>(area, <span class="fl">0.75</span>),</a>
<a class="sourceLine" id="cb18-13" data-line-number="13">            <span class="dt">max =</span> <span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(area)</a>
<a class="sourceLine" id="cb18-14" data-line-number="14">            ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-15" data-line-number="15"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_at</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">matches</a></span>(<span class="st">"area|max"</span>)), </a>
<a class="sourceLine" id="cb18-16" data-line-number="16">            <span class="cf">function</span>(x) {<span class="kw"><a href="https://rdrr.io/pkg/units/man/set_units.html">set_units</a></span>(x, <span class="st">"a"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="dv">1</span>)})</a>
<a class="sourceLine" id="cb18-17" data-line-number="17"><span class="co">#&gt; # A tibble: 9 x 8</span></a>
<a class="sourceLine" id="cb18-18" data-line-number="18"><span class="co">#&gt;   type     nr_watersurfaces total_area area_min area_Q1 area_Q2 area_Q3     max</span></a>
<a class="sourceLine" id="cb18-19" data-line-number="19"><span class="co">#&gt;   &lt;fct&gt;               &lt;int&gt;        [a]      [a]     [a]     [a]     [a]     [a]</span></a>
<a class="sourceLine" id="cb18-20" data-line-number="20"><span class="co">#&gt; 1 2190_a                308     3547.4      0.0     0.9     2.0     5.6   317.5</span></a>
<a class="sourceLine" id="cb18-21" data-line-number="21"><span class="co">#&gt; 2 3110                    5     1642.6    111.7   119.8   199.5   362.3   849.3</span></a>
<a class="sourceLine" id="cb18-22" data-line-number="22"><span class="co">#&gt; 3 3130                  271    37433.4      0.8    11.1    36.2   124.3  2807.2</span></a>
<a class="sourceLine" id="cb18-23" data-line-number="23"><span class="co">#&gt; 4 3130_aom             1022    88380.7      0.1     2.1     9.0    43.1  7062.7</span></a>
<a class="sourceLine" id="cb18-24" data-line-number="24"><span class="co">#&gt; 5 3130_na               226    85942.7      0.6    37.6   111.9   266.5 13668.2</span></a>
<a class="sourceLine" id="cb18-25" data-line-number="25"><span class="co">#&gt; 6 3140                  105    66531.9      0.8    11.8    46.6   230.4 13668.2</span></a>
<a class="sourceLine" id="cb18-26" data-line-number="26"><span class="co">#&gt; 7 3150                  500   113617.5      0.1     6.4    17.1    86.5 13668.2</span></a>
<a class="sourceLine" id="cb18-27" data-line-number="27"><span class="co">#&gt; 8 3160                  297    25137.0      0.1     6.4    21.8    64.3  4179.1</span></a>
<a class="sourceLine" id="cb18-28" data-line-number="28"><span class="co">#&gt; 9 rbbah                 528    40830.2      0.1     4.2    12.8    55.2  3748.6</span></a></code></pre></div>
<p>An strong point of <code>sf</code> objects is that the geometry has explicit units. Consequently we can make use of tools like <code><a href="https://rdrr.io/pkg/units/man/set_units.html">set_units()</a></code> to convert units (e.g. surface area as <em>are</em> (a)).</p>
<p>Because the main type code <code>3130</code> will mostly boil down to <code>3130_aom</code> in the field, a further interpreted flavour can be generated with <code><a href="../reference/read_watersurfaces_hab.html">read_watersurfaces_hab(interpreted = TRUE)</a></code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw"><a href="../reference/read_watersurfaces_hab.html">read_watersurfaces_hab</a></span>(<span class="dt">interpreted =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="st">  </span>.<span class="op">$</span>watersurfaces_types <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(type <span class="op">==</span><span class="st"> "3130"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="st">  </span>nrow</a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co">#&gt; [1] 0</span></a></code></pre></div>
</div>
</div>
</div>
<div id="matching-interpreted-data-sources-with-a-dataframe-column-of-types" class="section level2">
<h2 class="hasAnchor">
<a href="#matching-interpreted-data-sources-with-a-dataframe-column-of-types" class="anchor"></a>Matching interpreted data sources with a dataframe column of types</h2>
<p>The <code><a href="../reference/expand_types.html">expand_types()</a></code> function helps us to join a type column of your own dataframe with the results of <code><a href="../reference/read_habitatmap_terr.html">read_habitatmap_terr()</a></code> or <code><a href="../reference/read_watersurfaces_hab.html">read_watersurfaces_hab()</a></code>.</p>
<p>For both of these datasets, the following conversions of your dataframe are supported in order to create optimal joins:</p>
<ul>
<li>adding extra <em>subtype</em> rows when main type codes occur for which subtypes exist;</li>
<li>adding extra <em>main type</em> rows when certain subtypes of that main type are present (the conditions can be relaxed; see the function documentation). This is supported for 2330, 6230 and 91E0, for which this makes sense with the two mentioned data sources.</li>
</ul>
<p>An example (<code>df</code> is our dataframe):</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">df &lt;-</a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tribble</a></span>(</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">        <span class="op">~</span>mycode, <span class="op">~</span>obs,</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">        <span class="st">"2130"</span>, <span class="dv">5</span>,</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">        <span class="st">"2190"</span>, <span class="dv">45</span>,</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">        <span class="st">"2330_bu"</span>, <span class="dv">8</span>,</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">        <span class="st">"2330_dw"</span>, <span class="dv">8</span>,</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">        <span class="st">"6410_mo"</span>, <span class="dv">78</span>,</a>
<a class="sourceLine" id="cb20-9" data-line-number="9">        <span class="st">"6410_ve"</span>, <span class="dv">4</span>,</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">        <span class="st">"91E0_vn"</span>, <span class="dv">10</span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11">    )</a>
<a class="sourceLine" id="cb20-12" data-line-number="12">df</a>
<a class="sourceLine" id="cb20-13" data-line-number="13"><span class="co">#&gt; # A tibble: 7 x 2</span></a>
<a class="sourceLine" id="cb20-14" data-line-number="14"><span class="co">#&gt;   mycode    obs</span></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb20-16" data-line-number="16"><span class="co">#&gt; 1 2130        5</span></a>
<a class="sourceLine" id="cb20-17" data-line-number="17"><span class="co">#&gt; 2 2190       45</span></a>
<a class="sourceLine" id="cb20-18" data-line-number="18"><span class="co">#&gt; 3 2330_bu     8</span></a>
<a class="sourceLine" id="cb20-19" data-line-number="19"><span class="co">#&gt; 4 2330_dw     8</span></a>
<a class="sourceLine" id="cb20-20" data-line-number="20"><span class="co">#&gt; 5 6410_mo    78</span></a>
<a class="sourceLine" id="cb20-21" data-line-number="21"><span class="co">#&gt; 6 6410_ve     4</span></a>
<a class="sourceLine" id="cb20-22" data-line-number="22"><span class="co">#&gt; 7 91E0_vn    10</span></a></code></pre></div>
<p>With the <code>type_var</code> argument you specify which variable of your dataframe represents type codes:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">df_exp &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">    </span><span class="kw"><a href="../reference/expand_types.html">expand_types</a></span>(df, <span class="dt">type_var =</span> <span class="st">"mycode"</span>)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">df_exp</a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="co">#&gt; # A tibble: 13 x 2</span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="co">#&gt;    mycode        obs</span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="co">#&gt;    &lt;chr&gt;       &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="co">#&gt;  1 2130            5</span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="co">#&gt;  2 2190           45</span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="co">#&gt;  3 2330_bu         8</span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10"><span class="co">#&gt;  4 2330_dw         8</span></a>
<a class="sourceLine" id="cb21-11" data-line-number="11"><span class="co">#&gt;  5 6410_mo        78</span></a>
<a class="sourceLine" id="cb21-12" data-line-number="12"><span class="co">#&gt;  6 6410_ve         4</span></a>
<a class="sourceLine" id="cb21-13" data-line-number="13"><span class="co">#&gt;  7 91E0_vn        10</span></a>
<a class="sourceLine" id="cb21-14" data-line-number="14"><span class="co">#&gt;  8 2130_had        5</span></a>
<a class="sourceLine" id="cb21-15" data-line-number="15"><span class="co">#&gt;  9 2130_hd         5</span></a>
<a class="sourceLine" id="cb21-16" data-line-number="16"><span class="co">#&gt; 10 2190_a         45</span></a>
<a class="sourceLine" id="cb21-17" data-line-number="17"><span class="co">#&gt; 11 2190_mp        45</span></a>
<a class="sourceLine" id="cb21-18" data-line-number="18"><span class="co">#&gt; 12 2190_overig    45</span></a>
<a class="sourceLine" id="cb21-19" data-line-number="19"><span class="co">#&gt; 13 2330            8</span></a></code></pre></div>
<p>More examples and features are explained in the documentation of <code><a href="../reference/expand_types.html">expand_types()</a></code>.</p>
<p>Obviously, more rows of <code>habitatmap_terr</code> will be retained by joining <code>df_exp</code>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">hmt<span class="op">$</span>habitatmap_terr_types <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">semi_join</a></span>(df_exp, <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">type =</span> <span class="st">"mycode"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="st">  </span>nrow</a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="co">#&gt; [1] 5885</span></a></code></pre></div>
<p>When joining with <code>df</code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">hmt<span class="op">$</span>habitatmap_terr_types <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">semi_join</a></span>(df, <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">type =</span> <span class="st">"mycode"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="st">  </span>nrow</a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="co">#&gt; [1] 4447</span></a></code></pre></div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-de_saeger_biologische_2018">
<p>De Saeger, Steven, Robin Guelinckx, Patrik Oosterlynck, Adinda De Bruyn, Klaas Debusschere, Pieter Dhaluin, Rémar Erens, et al. 2018. <em>Biologische Waarderingskaart en Natura 2000 Habitatkaart: Uitgave 2018</em>. Reports of the Research Institute for Nature and Forest. Brussels: Research Institute for Nature and Forest (INBO).</p>
</div>
<div id="ref-leyssen_indicatieve_2018">
<p>Leyssen, An, Luc Denys, and Steven De Saeger. 2018. <em>Indicatieve situering van het Natura 2000 habitattype 3260. Submontane en laaglandrivieren met vegetaties behorend tot het Ranunculion fluitantis en het Callitricho-Batrachion. Uitgave 2018 (versie 1.6).</em> Reports of the Research Institute for Nature and Forest. Brussels: Research Institute for Nature and Forest (INBO).</p>
</div>
<div id="ref-packet_watervlakken_2018">
<p>Packet, Jo, Kevin Scheers, Vincent Smeekens, An Leyssen, Carine Wils, and Luc Denys. 2018. <em>Watervlakken versie 1.0: polygonenkaart van stilstaand water in Vlaanderen: Een nieuw instrument voor onderzoek, water-, milieu- en natuurbeleid</em>. Reports of the Research Institute for Nature and Forest. Brussels: Research Institute for Nature and Forest (INBO).</p>
</div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>A tibble is a dataframe that makes working in the tidyverse a little <a href="https://r4ds.had.co.nz/tibbles.html">easier</a>.<a href="#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#intro">Intro</a></li>
      <li><a href="#data-sources">Data sources</a></li>
      <li><a href="#using-the-read_----functions">Using the <code>read_...()</code> functions</a></li>
      <li><a href="#matching-interpreted-data-sources-with-a-dataframe-column-of-types">Matching interpreted data sources with a dataframe column of types</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Floris Vanderhaeghe, Toon Westra, Hans Van Calster.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
